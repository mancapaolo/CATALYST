<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>FlowSOM clustering &amp; ConsensusClusterPlus metaclustering — cluster • CATALYST</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="FlowSOM clustering &amp; ConsensusClusterPlus metaclustering — cluster" />

<meta property="og:description" content="cluster will first group cells into xdimxydim 
clusters using FlowSOM, and subsequently perform metaclustering 
with ConsensusClusterPlus into 2 through maxK clusters. 
In the returned daFrame, those antigens used for clustering will be 
labelled as 'type' markers, and the remainder of antigens as 
'state' markers." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-54095998-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-54095998-3');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CATALYST</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Release version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/differential_analysis.html">Differential analysis with CATALYST</a>
    </li>
    <li>
      <a href="../articles/preprocessing.html">Preprocessing with CATALYST</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/HelenaLC/CATALYST">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://www.imls.uzh.ch/en/research/robinson.html">Robinson Lab</a>
</li>
<li>
  <a href="http://www.bodenmillerlab.org">Bodenmiller Lab</a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>FlowSOM clustering &amp; ConsensusClusterPlus metaclustering</h1>
    <small class="dont-index">Source: <a href='https://github.com/HelenaLC/CATALYST/blob/master/R/AllGenerics.R'><code>R/AllGenerics.R</code></a>, <a href='https://github.com/HelenaLC/CATALYST/blob/master/R/cluster.R'><code>R/cluster.R</code></a></small>
    <div class="hidden name"><code>cluster.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>cluster</code> will first group cells into <code>xdim</code>x<code>ydim</code> 
clusters using <span class="pkg">FlowSOM</span>, and subsequently perform metaclustering 
with <span class="pkg">ConsensusClusterPlus</span> into 2 through <code>maxK</code> clusters. 
In the returned <code>daFrame</code>, those antigens used for clustering will be 
labelled as '<code>type</code>' markers, and the remainder of antigens as 
'<code>state</code>' markers.</p>
    
    </div>

    <pre class="usage"><span class='fu'>cluster</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S4 method for daFrame</span>
<span class='fu'>cluster</span>(<span class='no'>x</span>, <span class='no'>cols_to_use</span>, <span class='kw'>xdim</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>ydim</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>maxK</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <code><a href='daFrame-class.html'>daFrame</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional arguments.</p></td>
    </tr>
    <tr>
      <th>cols_to_use</th>
      <td><p>a character vector. Specifies which antigens to use for clustering.</p></td>
    </tr>
    <tr>
      <th>xdim, ydim</th>
      <td><p>numeric. Specify the grid size of the self-orginizing map. 
The default 10x10 grid will yield 100 clusters.</p></td>
    </tr>
    <tr>
      <th>maxK</th>
      <td><p>numeric. Specifies the maximum number of clusters to evaluate
in the metaclustering. For <code>maxK = 20</code>, for example, 
metaclustering will be performed for 2 through 20 clusters.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical. Should information on progress be reported?</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>numeric. Sets random seed in <code>ConsensusClusterPlus()</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function will add information to the following slots 
of the input <code>daFrame</code> (and return it):</p><ul>
<li><p><code>rowData</code><ul>
<li><p><code>cluster_id</code>:
  each cell's cluster ID as inferred by <code>FlowSOM</code>. 
  One of 1, ..., <code>xdim</code>x<code>ydim</code>.</p></li>
</ul></p></li>
<li><p><code>colData</code><ul>
<li><p><code>marker_class</code>: 
  <code>"type"</code> or <code>"state"</code>. 
  Specifies whether an antigen has been used for clustering 
  or not, respectively.</p></li>
</ul></p></li>
<li><p><code>metadata</code><ul>
<li><p><code>SOM_codes</code>:
  a table with dimensions K x (# cell type markers), 
  where K = <code>xdim</code> x <code>ydim</code>. Contains the SOM codes.</p></li>
<li><p><code>cluster_codes</code>:
  a table with dimensions K x (<code>maxK</code> + 1). 
  Contains the cluster codes for all metaclustering.</p></li>
<li><p><code>delta_area</code>: 
  a <code>ggplot</code> object. See above for details.</p></li>
</ul></p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The delta area represents the amount of extra cluster stability gained when 
clustering into k groups as compared to k-1 groups. It can be expected that 
high stability of clusters can be reached when clustering into the number of 
groups that best fits the data. The "natural" number of clusters present in 
the data should thus corresponds to the value of k where there is no longer 
a considerable increase in stability (pleateau onset).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Nowicka M, Krieg C, Weber LM et al. 
CyTOF workflow: Differential discovery in 
high-throughput high-dimensional cytometry datasets.
<em>F1000Research</em> 2017, 6:748 (doi: 10.12688/f1000research.11622.1)</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='data.html'>data</a></span>(<span class='no'>PBMC_fs</span>, <span class='no'>PBMC_panel</span>, <span class='no'>PBMC_md</span>)
<span class='no'>re</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='daFrame-class.html'>daFrame</a></span>(<span class='no'>PBMC_fs</span>, <span class='no'>PBMC_panel</span>, <span class='no'>PBMC_md</span>)</div><div class='output co'>#&gt; <span class='error'>Error in as.list.default(X): no method for coercing this S4 class to a vector</span></div><div class='input'>
<span class='co'># specify antigens to use for clustering</span>
<span class='no'>lineage</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"CD3"</span>, <span class='st'>"CD45"</span>, <span class='st'>"CD4"</span>, <span class='st'>"CD20"</span>, <span class='st'>"CD33"</span>,
    <span class='st'>"CD123"</span>, <span class='st'>"CD14"</span>, <span class='st'>"IgM"</span>, <span class='st'>"HLA_DR"</span>, <span class='st'>"CD7"</span>)
(<span class='no'>re</span> <span class='kw'>&lt;-</span> <span class='fu'>cluster</span>(<span class='no'>re</span>, <span class='kw'>cols_to_use</span><span class='kw'>=</span><span class='no'>lineage</span>))</div><div class='output co'>#&gt; <span class='error'>Error in cluster(re, cols_to_use = lineage): object 're' not found</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Helena Lucia Crowell <a href='mailto:crowellh@student.ethz.ch'>crowellh@student.ethz.ch</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Helena L. Crowell, Vito R.T. Zanotelli, Stéphane Chevrier, Mark D. Robinson, Bernd Bodenmiller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

